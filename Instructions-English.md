# EMI-Pokedex

Hello and welcome to the Emi-Pokedex!

This is a learning project, to get started with [NEXT.js](https://nextjs.org/). I was too old for pokemon, when it started. But my daughters love this. I can hardly remeber the names. So i tried to build a pokedex, where i can find a pokemon based on there color and the look. So that i have name. The following instructions are for learning purposes. I will describe, how i build this project.

Requirements:

Basic knowledge about:

- html
- css
- javascript
- react

Please install the [VS Code Editor](https://code.visualstudio.com/).

## 1. Step Initial Setup

Navigate to a folder on your computer where the project can live. I choosed a folder called websites. Then you open a terminal window and put this in:

```
npx create-next-app@latest
```

If you do this for the first time, you would be asked to install the create-next-app@14.1.0 package. Here you can press the enter key. At the point of writing, nextjs 14 was the newest version.

```
Need to install the following packages:
create-next-app@14.1.0
Ok to proceed? (y)
```

After that you can choose some options. Please look at the nextjs [docs](https://nextjs.org/docs/getting-started/installation) if you want to know more about that. I choosed this options:

```
âœ” What is your project named? â€¦ emi-pokedex
âœ” Would you like to use TypeScript? â€¦ No
âœ” Would you like to use ESLint? â€¦ Yes
âœ” Would you like to use Tailwind CSS? â€¦ No
âœ” Would you like to use `src/` directory? â€¦ No
âœ” Would you like to use App Router? (recommended) â€¦ No
âœ” Would you like to customize the default import alias (@/*)? â€¦ No
```

When the project is ready you can switch to the folder. This is a good time to open [VS Code Editor](https://code.visualstudio.com/) and open the folder in VS Code. Please open a terminal window in VS Code. You can find the icon for that in the upper right corner Your file structure should now look like this:

```
.
â”œâ”€â”€.next
â”œâ”€â”€node_modules
â”œâ”€â”€pages
â”‚   â”œâ”€â”€api
â”‚   â”œâ”€â”€_app.js
â”‚   â”œâ”€â”€_document.js
â”‚   â”œâ”€â”€_index.js
â”œâ”€â”€public
â”œâ”€â”€styles
â”œâ”€â”€.eslintrc.json
â”œâ”€â”€.gitignore
â”œâ”€â”€jsconfig.json
â”œâ”€â”€next.config.mjs
â”œâ”€â”€package-lock.json
â”œâ”€â”€package.json
â”œâ”€â”€README.md
```

Now you can start the server for the first time:

```
npm run dev
```

In the terminal in VS Code you can click the link http://localhost:3000 (mac: hold command and click, windows: i think strg and click ) or you can paste it in your browser of choice. I recommend using chrome or firefox.

## 2. Step Removing all things we don't need

First we go into the "index.js" under the "pages" folder and delete everything we don't need. It should look like this now:

```Javascript
import Head from "next/head";

export default function Home() {
  return (
    <>
      <Head>
        <title>EMI - Pokedex</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main>
        <h1>Hello from Next.js</h1>
      </main>
    </>
  );
}
```

After you press save the site in the browser looks a little weird. we will fix this in the next steps. ðŸ˜‰

Now we remove the "Home.module.css" in the "styles" folder:

```
.
...
â”œâ”€â”€public
â”œâ”€â”€styles
â”‚   â”œâ”€â”€globals.css
â”‚   â”œâ”€â”€Home.module.css <-- delete this file
â”œâ”€â”€.eslintrc.json
...
```

In same folder edit "globals.css" to:

```Javascript
*,
*::after,
*::before {
  box-sizing: border-box;
}

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans",
    "Helvetica Neue", sans-serif;
}

```

This sets the border-box, and a nicer font. The site should now be white with a text "Hello from Next.js" Under the public folder you can remove the files "next.svg" and "vercel.svg"

```
.
...
â”œâ”€â”€public
â”‚   â”œâ”€â”€favicon.ico
â”‚   â”œâ”€â”€next.svg <-- delete this file
â”‚   â”œâ”€â”€vercel.svg <-- delete this file
â”œâ”€â”€.eslintrc.json
...
```

## 3. Step Let's build a pokedex!

The first thing that i will do, is to display some pokemons on the homepage. To fetch the pokemon i will use the [SWR](https://swr.vercel.app/) library. I stop my running server with the command "control + c". On windows it should be "STRG + c". Then i install the library with:

```
npm i swr
```

Now we import swr to use it. You can open pages/index.js and put this on the top:

```Javascript
import useSWR from "swr";
```

The next step is to create a fetcher. Luckily we can take the example from there website:

```Javascript
const fetcher = (...args) => fetch(...args).then((res) => res.json());
```

For the URL i make a new const, and save it there:

```Javascript
const URL = "https://pokeapi.co/api/v2/pokemon";
```

After that we put the fetch from swr in the function Home() and console.log the data.

```Javascript
const { data, error, isLoading } = useSWR(URL, fetcher);

  if (isLoading) {
    return <h1>Loading...</h1>;
  }

  if (error) {
    return <h1>failed to load</h1>;
  }
  console.log(data);
```

In the return we map "data.results" (in results we can find the name and the url. Take a look in the console in the browser) between main we put:

```Javascript
<main>
  <h1>Pokemon List</h1>
  <ul>
    {data.results.map(({ name }) => (
      <li key={name}>{name}</li>
    ))}
  </ul>
</main>
```

### => please expand the dropdown to see the whole index.js!

<details>
<summary>This is how the index.js should look right now with the first 20 pokemon</summary>

```Javascript
import useSWR from "swr";
import Head from "next/head";

const fetcher = (...args) => fetch(...args).then((res) => res.json());

const URL = "https://pokeapi.co/api/v2/pokemon";

export default function Home() {
  const { data, error, isLoading } = useSWR(URL, fetcher);

  if (isLoading) {
    return <h1>Loading...</h1>;
  }

  if (error) {
    return <h1>failed to load</h1>;
  }
  console.log(data);

  return (
    <>
      <Head>
        <title>EMI - Pokedex</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main>
        <h1>Pokemon List</h1>
        <ul>
          {data.results.map(({ name }) => (
            <li key={name}>{name}</li>
          ))}
        </ul>
      </main>
    </>
  );
}
```

</details>

---

We only get the first 20 pokemon but not more. The api has a pagination build in. First we put two buttons in the pages/index.js under the pokemon list. The buttons can't do anything right now. the only log to the console, that they are clicked.

```Javascript
<button
  type="button"
  onClick={() => {
    console.log("prev button");
  }}>
  Previous Button
</button>
<button
  type="button"
  onClick={() => {
    console.log("next button");
  }}>
  Next Button
</button>
```

![website with buttons](../emi-pokedex/public/instruction_images/pokemon-01.png)

Now we import the useState from react.

```Javascript
import { useState } from "react";
```

And put it in the Home() function before the fetch.

```Javascript
const [siteId, setSiteId] = useState(0);
```

The buttons also get an update. They should set the state up or down. The prev button will be disabled if the siteid is 0.

```Javascript
<button
  type="button"
  disabled={siteId === 0}
  onClick={() => {
    setSiteId((siteId) => siteId - 20);
    console.log("prev button");
  }}>
  Previous Button
</button>
```

```Javascript
<button
  type="button"
  onClick={() => {
    setSiteId((siteId) => siteId + 20);
    console.log("next button");
  }}>
  Next Button
</button>
```

At this point, the app is not crashing. But also not working. We have to tell the fetcher that we want to give a number at the end of the url. We can now copy the url from the const URL and put it in the fetcher with backticks. So that we can put the state at the end of the url.

```Javascript
const { data, error, isLoading } = useSWR(`https://pokeapi.co/api/v2/pokemon?offset=${siteId}`, fetcher);
```

### => please expand the dropdown to see the whole index.js!

<details>
<summary>The whole index.js should look like this now.</summary>

```Javascript
import useSWR from "swr";
import Head from "next/head";
import { useState } from "react";

const fetcher = (...args) => fetch(...args).then((res) => res.json());

export default function Home() {
  const [siteId, setSiteId] = useState(0);
  const { data, error, isLoading } = useSWR(`https://pokeapi.co/api/v2/pokemon?offset=${siteId}`, fetcher);

  if (isLoading) {
    return <h1>Loading...</h1>;
  }

  if (error) {
    return <h1>failed to load</h1>;
  }
  console.log(data);

  return (
    <>
      <Head>
        <title>EMI - Pokedex</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main>
        <h1>Pokemon List</h1>
        <ul>
          {data.results.map(({ name }) => (
            <li key={name}>{name}</li>
          ))}
        </ul>
        <button
          type="button"
          disabled={siteId === 0}
          onClick={() => {
            setSiteId((siteId) => siteId - 20);
            console.log("prev button");
          }}>
          Previous Button
        </button>
        <button
          type="button"
          onClick={() => {
            setSiteId((siteId) => siteId + 20);
            console.log("next button");
          }}>
          Next Button
        </button>
      </main>
    </>
  );
}
```

</details>

The App should now work as expected. On load the site will list the first 20 pokemon. When you click on a button. The next 20 pokemon will load. ðŸ¥³

## 4. Step Let's get more data => images

For now we only have the name and the url. That's kinda boring. Let's get some images. But that's a little bit tricky. When you want more information from the pokemon api, you have to send the name or the id. Luckily the url has the id in it. We take the li inside the data.results.map and change it to a div. But first we have to change the next.config.mjs file to allow images from the pokemon api. So open this file and change it to this.

```Javascript
const nextConfig = {
  reactStrictMode: true,
  images: {
    remotePatterns: [
      {
        protocol: "https",
        hostname: "raw.githubusercontent.com",
      },
    ],
  },
};

export default nextConfig;
```

Now we import Image from nextjs at the top.

```Javascript
import Image from "next/image";
```

In the data.results.map we add the url.

```Javascript
{data.results.map(({ name, url }) => (
  // ... code
))}
```

Then we put the next image in like the code below. The pokemon api has special url's where you can get the images. Here in this code is the default version and the dream-world version. Maybe the user can later switch the sources with a button in the app. Inside the url you pass the url from the fetch and split the url from the end. That give us the id. With this id, we get the correct image for every pokemon.

```Javascript
 <Image
  // front default
  // src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${
  //   url.split("/")[url.split("/").length - 2]
  // }.png`}
  src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/dream-world/${
    url.split("/")[url.split("/").length - 2]
  }.svg`}
  width={250}
  height={250}
  alt={name}
/>
```

The site should look like this right now:

![website with images](../emi-pokedex/public/instruction_images/pokemon-02.png)

### => please expand the dropdown to see the whole index.js!

<details>
<summary>The whole index.js should look like this now.</summary>

```Javascript
import useSWR from "swr";
import Head from "next/head";
import { useState } from "react";
import Image from "next/image";

const fetcher = (...args) => fetch(...args).then((res) => res.json());

export default function Home() {
  const [siteId, setSiteId] = useState(0);
  const { data, error, isLoading } = useSWR(`https://pokeapi.co/api/v2/pokemon?offset=${siteId}`, fetcher);

  if (isLoading) {
    return <h1>Loading...</h1>;
  }

  if (error) {
    return <h1>failed to load</h1>;
  }
  console.log(data.results);

  return (
    <>
      <Head>
        <title>EMI - Pokedex</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main>
        <h1>Pokemon List</h1>
        <div>
          {data.results.map(({ name, url }) => (
            <div key={name}>
              <h2>{name}</h2>
              <Image
                // front default
                // src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${
                //   url.split("/")[url.split("/").length - 2]
                // }.png`}
                src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/dream-world/${
                  url.split("/")[url.split("/").length - 2]
                }.svg`}
                width={250}
                height={250}
                alt={name}
              />
            </div>
          ))}
        </div>
        <button
          type="button"
          disabled={siteId === 0}
          onClick={() => {
            setSiteId((siteId) => siteId - 20);
            console.log("prev button");
          }}>
          Previous Button
        </button>
        <button
          type="button"
          onClick={() => {
            setSiteId((siteId) => siteId + 20);
            console.log("next button");
          }}>
          Next Button
        </button>
      </main>
    </>
  );
}
```

</details>

## 5. Make an own component for the pokemon cards

First we create a new folder "components" in the root directory.

```
.
â”œâ”€â”€.next
â”œâ”€â”€components <-- this one here
â”œâ”€â”€node_modules
â”œâ”€â”€pages
â”‚   â”œâ”€â”€api
â”‚   â”œâ”€â”€_app.js
â”‚   â”œâ”€â”€_document.js
â”‚   â”œâ”€â”€_index.js
â”œâ”€â”€public
â”œâ”€â”€styles
â”œâ”€â”€.eslintrc.json
â”œâ”€â”€.gitignore
â”œâ”€â”€jsconfig.json
â”œâ”€â”€next.config.mjs
â”œâ”€â”€package-lock.json
â”œâ”€â”€package.json
â”œâ”€â”€README.md
```

In that folder create Card.js folder. In the Card Folder create a new index.js. We put all the things in his own component. In the Cards/index.js you create a new function Card and put the whole code here.

```
.
â”œâ”€â”€.next
â”œâ”€â”€components
â”‚   â”œâ”€â”€Card <-- this one here
â”‚      â”œâ”€â”€index.js <-- this one here
â”œâ”€â”€node_modules
...
```

The main index.js should look like this now:

```Javascript
import Head from "next/head";
import Card from "@/components/Card"; //<-- we import the card component here

export default function Home() {
  return (
    <>
      <Head>
        <title>EMI - Pokedex</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main>
        <h1>Pokemon List</h1>
        <Card /> // <-- and place it here
      </main>
    </>
  );
}
```

The Card/index.js file should now look like this:

```Javascript
import useSWR from "swr";
import { useState } from "react";
import Image from "next/image";

const fetcher = (...args) => fetch(...args).then((res) => res.json());

export default function Card() {
  const [siteId, setSiteId] = useState(0);
  const { data, error, isLoading } = useSWR(`https://pokeapi.co/api/v2/pokemon?offset=${siteId}`, fetcher);

  if (isLoading) {
    return <h1>Loading...</h1>;
  }

  if (error) {
    return <h1>failed to load</h1>;
  }
  console.log(data.results);

  return (
    <>
      <div>
        {data.results.map(({ name, url }) => (
          <div key={name}>
            <h2>{name}</h2>
            <Image
              // front default
              // src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${
              //   url.split("/")[url.split("/").length - 2]
              // }.png`}
              src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/dream-world/${
                url.split("/")[url.split("/").length - 2]
              }.svg`}
              width={250}
              height={250}
              alt={name}
            />
          </div>
        ))}
      </div>
      <button
        type="button"
        disabled={siteId === 0}
        onClick={() => {
          setSiteId((siteId) => siteId - 20);
          console.log("prev button");
        }}>
        Previous Button
      </button>
      <button
        type="button"
        onClick={() => {
          setSiteId((siteId) => siteId + 20);
          console.log("next button");
        }}>
        Next Button
      </button>
    </>
  );
}
```

Everything looks now a little bit cleaner. Later we will lift the useState up to index.js or app.js. But for now, we want the site prettier. Let's write some css!

## 6. Write some CSS with Styled Components!

First i stop the development server again (mac: control + c, windows: strg + c). Then i install [styled components](https://styled-components.com/) with npm.

```
npm install styled-components
```

Now i create a new file in the components/Card folder. I name this file Card.Styled.js. You can style in the index.js too. But i like to keep this things seperated.

```
.
â”œâ”€â”€.next
â”œâ”€â”€components
â”‚   â”œâ”€â”€Card
â”‚      â”œâ”€â”€index.js
â”‚      â”œâ”€â”€Card.Styled.js
â”œâ”€â”€node_modules
...
```

In the Card.Styled.js we first import the styled Components:

```Javascript
import styled from "styled-components";
```

The first styled thing is an article. Here we write:

```Javascript
export const PokemonCard = styled.article`
  background-color: aquamarine;
`;
```

In the Card/index.js i change the "card-wrapper" to an article too.

```Javascript
{data.results.map(({ name, url }) => (
  <article key={name}> // <!-- here -->
    <h2>{name}</h2>
    <Image
      // front default
      // src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${
      //   url.split("/")[url.split("/").length - 2]
      // }.png`}
      src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/dream-world/${
        url.split("/")[url.split("/").length - 2]
      }.svg`}
      width={250}
      height={250}
      alt={name}
    />
  </article> // <-- and here
  ))}

```

In the Card/index.js file i import the PokemonCard:

```Javascript
import { PokemonCard } from "./Card.Styled";
```

And then in the same file i rename the renamed "article" to PokemonCard too:

```Javascript
{data.results.map(({ name, url }) => (
  <PokemonCard key={name}> // <!-- here -->
    <h2>{name}</h2>
    <Image
      // front default
      // src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${
      //   url.split("/")[url.split("/").length - 2]
      // }.png`}
      src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/dream-world/${
        url.split("/")[url.split("/").length - 2]
      }.svg`}
      width={250}
      height={250}
      alt={name}
    />
  </PokemonCard> // <-- and here
  ))}
```

The website should look like this right now:

![website with images](../emi-pokedex/public/instruction_images/pokemon-03.png)

And now... magic time warp! I added some css and changed some files. In den index.js i put a logo. In the card component i imported the CSS the files look like this right now:

### => please expand the dropdown to see the whole files!

<details>
<summary>The whole index.js should look like this now.</summary>

```Javascript
import Head from "next/head";
import Image from "next/image";
import Card from "@/components/Card";

export default function Home() {
  return (
    <>
      <Head>
        <title>EMI - Pokedex</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main>
        <Image
          src="/images/emi-pokedex-logo.png"
          width={1000}
          height={200}
          alt="The EMI- Pokedex Logo"
          style={{ width: "80%", height: "auto", padding: "2em", margin: "auto", display: "block" }}
        />
        <Card />
      </main>
    </>
  );
}

```

</details>

<details>
<summary>The whole Components/Card/index.js should look like this now.</summary>

```Javascript
import useSWR from "swr";
import { useState } from "react";
import Image from "next/image";

import {
  PokemonCardWrapper,
  PokemonCard,
  PokemonCardTitle,
  PreviousAndNextButtonsWrapper,
  PreviousAndNextButtons,
} from "./Card.Styled";

const fetcher = (...args) => fetch(...args).then((res) => res.json());

export default function Card() {
  const [siteId, setSiteId] = useState(0);
  const { data, error, isLoading } = useSWR(`https://pokeapi.co/api/v2/pokemon?limit=6&offset=${siteId}`, fetcher);

  if (isLoading) {
    return <h1>Loading...</h1>;
  }

  if (error) {
    return <h1>failed to load</h1>;
  }
  //console.log(data.results);

  return (
    <>
      <PokemonCardWrapper>
        {data.results.map(({ name, url }) => (
          <PokemonCard key={name}>
            <Image
              // front default
              // src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${
              //   url.split("/")[url.split("/").length - 2]
              // }.png`}
              src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/dream-world/${
                url.split("/")[url.split("/").length - 2]
              }.svg`}
              width={200}
              height={200}
              alt={name}
            />
            <PokemonCardTitle>{name}</PokemonCardTitle>
          </PokemonCard>
        ))}
      </PokemonCardWrapper>
      <PreviousAndNextButtonsWrapper>
        <PreviousAndNextButtons
          type="button"
          disabled={siteId === 0}
          onClick={() => {
            setSiteId((siteId) => siteId - 6);
            console.log("prev button");
          }}>
          Previous Button
        </PreviousAndNextButtons>
        <PreviousAndNextButtons
          type="button"
          onClick={() => {
            setSiteId((siteId) => siteId + 6);
            console.log("next button");
          }}>
          Next Button
        </PreviousAndNextButtons>
      </PreviousAndNextButtonsWrapper>
    </>
  );
}


```

</details>

<details>
<summary>The whole Components/Card/CardStyled.js should look like this now.</summary>

```Javascript
import styled from "styled-components";

export const PokemonCardWrapper = styled.div`
  display: grid;
  grid-template-columns: repeat(1, 1fr);
  grid-template-rows: 1fr;
  grid-column-gap: 15px;
  grid-row-gap: 15px;
  @media only screen and (min-width: 700px) {
    grid-template-columns: repeat(3, 1fr);
  }
`;

export const PokemonCard = styled.article`
  text-align: center;
  padding: 2em 0.5em;
  border-radius: 12px;
`;

export const PokemonCardTitle = styled.h2`
  text-transform: capitalize;
`;

export const PreviousAndNextButtonsWrapper = styled.div`
  display: flex;
  flex-wrap: wrap;
  gap: 1em;
  justify-content: space-between;
  margin: 2em;
`;

export const PreviousAndNextButtons = styled.button`
  flex-grow: 1;
  padding: 2em 1.5em;
`;


```

</details>

<details>
<summary>The whole CSS globals.css should look like this now.</summary>

```CSS
*,
*::after,
*::before {
  box-sizing: border-box;
}

:root {
  --max-width: 1200px;
  --primary-background-color: #f8f7f4;
}

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans",
    "Helvetica Neue", sans-serif;
  max-width: var(--max-width);
  background-color: var(--primary-background-color);
  padding: 0 1em;
  margin: 0 auto;
}
```

</details>

The site should look like this now. ðŸ¥³

![website with images](../emi-pokedex/public/instruction_images/pokemon-04.png)
